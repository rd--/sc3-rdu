cmake_minimum_required(VERSION 3.5)
set(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/ext/cmake_modules ${CMAKE_MODULE_PATH})
set(CMAKE_CXX_STANDARD 17)

include(SuperColliderServerPlugin)
include(SuperColliderCompilerConfig)
include(InstallRequiredSystemLibraries)

sc_check_sc_path("${SC_PATH}")
set(SC_PATH "${SC_PATH}" CACHE PATH "Path to SuperCollider source. Relative paths are treated as relative to this script" FORCE)

project("sc3-rdu")
sc_do_initial_compiler_config()

option(SUPERNOVA "Build plugins for supernova" OFF)
option(SCSYNTH "Build plugins for scsynth" ON)
option(NATIVE "Optimize for native architecture" OFF)
option(STRICT "Use strict warning flags" OFF)
option(NOVA_SIMD "Build plugins with nova-simd support." OFF)

sc_add_server_plugin("sc3-rdu" "RDustR" "cpp/RDustR.cpp" "sc/RDustR.sc" "help/scd/RDustR.help.scd")
sc_add_server_plugin("sc3-rdu" "RDX7" "cpp/RDX7.cpp" "sc/RDX7.sc" "help/scd/RDX7.help.scd")
sc_add_server_plugin("sc3-rdu" "RExpRandN" "cpp/RExpRandN.cpp" "sc/RExpRandN.sc" "help/scd/RExpRandN.help.scd")
sc_add_server_plugin("sc3-rdu" "RIRandN" "cpp/RIRandN.cpp" "sc/RIRandN.sc" "help/scd/RIRandN.help.scd")
sc_add_server_plugin("sc3-rdu" "RLinRandN" "cpp/RLinRandN.cpp" "sc/RLinRandN.sc" "help/scd/RLinRandN.help.scd")
sc_add_server_plugin("sc3-rdu" "RRandN" "cpp/RRandN.cpp" "sc/RRandN.sc" "help/scd/RRandN.help.scd")
sc_add_server_plugin("sc3-rdu" "RSVFBP" "cpp/RSVFBP.cpp" "sc/RSVFBP.sc" "help/scd/RSVFBP.help.scd")
sc_add_server_plugin("sc3-rdu" "RSVFHP" "cpp/RSVFHP.cpp" "sc/RSVFHP.sc" "help/scd/RSVFHP.help.scd")
sc_add_server_plugin("sc3-rdu" "RSVFLP" "cpp/RSVFLP.cpp" "sc/RSVFLP.sc" "help/scd/RSVFLP.help.scd")
sc_add_server_plugin("sc3-rdu" "RTExpRandN" "cpp/RTExpRandN.cpp" "sc/RTExpRandN.sc" "help/scd/RTExpRandN.help.scd")
sc_add_server_plugin("sc3-rdu" "RTLinRandN" "cpp/RTLinRandN.cpp" "sc/RTLinRandN.sc" "help/scd/RTLinRandN.help.scd")
sc_add_server_plugin("sc3-rdu" "RTracePlay" "cpp/RTracePlay.cpp" "sc/RTracePlay.sc" "help/scd/RTracePlay.help.scd")
sc_add_server_plugin("sc3-rdu" "RTraceRd" "cpp/RTraceRd.cpp" "sc/RTraceRd.sc" "help/scd/RTraceRd.help.scd")
sc_add_server_plugin("sc3-rdu" "RTRandN" "cpp/RTRandN.cpp" "sc/RTRandN.sc" "help/scd/RTRandN.help.scd")
sc_add_server_plugin("sc3-rdu" "RTScramble" "cpp/RTScramble.cpp" "sc/RTScramble.sc" "help/scd/RTScramble.help.scd")
